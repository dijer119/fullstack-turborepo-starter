// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model User {
  id        Int      @id @default(autoincrement())
  email     String   @unique
  name      String?
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("users")
}

model Company {
  id        Int      @id @default(autoincrement())
  name      String
  description String?
  code String?
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("companies")
}

model MaddingStockMessage {
  id              Int      @id @default(autoincrement())
  messageId       BigInt   @unique @map("message_id")
  rawText         String   @map("raw_text") @db.Text
  strategy        String?  // 전략 (예: 전략A, 전략C)
  stockName       String?  @map("stock_name")
  tradeType       String?  @map("trade_type") // 매매유형 (매수, 매도)
  status          String?  // 상태 (도달 등)
  price           String?
  additionalInfo  String?  @map("additional_info") // 추가정보 (예: 강화 반등)
  profitRate      String?  @map("profit_rate") // 손익율
  changePercent   String?  @map("change_percent")
  keywords        String[] @default([])
  symbols         String[] @default([])
  urls            String[] @default([])
  messageDate     DateTime @map("message_date")
  channelUsername String   @map("channel_username")
  createdAt       DateTime @default(now()) @map("created_at")
  updatedAt       DateTime @updatedAt @map("updated_at")

  @@index([messageDate])
  @@index([stockName])
  @@index([channelUsername])
  @@index([tradeType])
  @@map("maddingstock_messages")
}
