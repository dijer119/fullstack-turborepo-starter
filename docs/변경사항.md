# 변경 사항 요약 (사용자 관리 기능)

## 1. 프론트엔드 (Apps/Web)

### 의존성 추가
- `graphql`: GraphQL 쿼리 언어 지원
- `graphql-request`: 경량 GraphQL 클라이언트

### 상태 관리 (Redux Store)
- **`src/store/graphqlBaseQuery.ts`** [신규]
  - RTK Query에서 `graphql-request`를 사용하기 위한 Base Query 유틸리티.
  - 브라우저 환경에서 상대 경로 URL(`window.location.origin`) 처리 로직 포함.

- **`src/store/services/users-api.ts`** [신규]
  - 사용자 관리(CRUD)를 위한 API 서비스 정의.
  - **기능**: `getUsers`(조회), `createUser`(생성), `updateUser`(수정), `deleteUser`(삭제).
  - **설정**: `process.env.NEXT_PUBLIC_API_URL`을 우선 사용하며, 없을 경우 `http://localhost:3001/graphql`을 기본값으로 사용.
  - **데이터 변환**: `transformResponse`를 사용하여 GraphQL 응답 객체(예: `{ users: [...] }`)에서 실제 데이터 배열만 추출하도록 처리.

- **`src/store/index.ts`** [수정]
  - Redux Store에 `usersApi` 리듀서와 미들웨어를 등록하여 전역 상태 관리 연결.

### UI 구현
- **`pages/users.tsx`** [신규]
  - **/users** 경로에 매핑되는 사용자 관리 페이지.
  - **기능**:
    - 사용자 목록 테이블 표시.
    - 새로운 사용자 추가 (이메일, 이름 입력).
    - 사용자 삭제 버튼.
    - 로딩 상태 및 상세 에러 메시지 표시 (디버깅 용이).

- **`src/components/Header.tsx`** [수정]
  - 상단 네비게이션 바에 **'사용자'** 메뉴 링크 추가 (`/users`).

## 2. 주요 버그 수정 내역

### Invalid URL 에러 수정
- **증상**: 브라우저에서 `/graphql` 상대 경로 호출 시 URL 파싱 에러 발생.
- **해결**: `graphqlBaseQuery.ts`에서 현재 윈도우의 origin을 확인하여 절대 경로로 변환하도록 수정.

### users.map is not a function 에러 수정
- **증상**: `getUsers` 쿼리 결과가 배열이 아닌 객체(`{ users: [...] }`)로 반환되어 `.map()` 함수 호출 시 에러 발생.
- **해결**: `users-api.ts`의 모든 엔드포인트에 `transformResponse` 속성을 추가하여, 응답 객체 내부의 실제 데이터 필드만 반환하도록 수정.

### 포트 연결 거부 에러 (Connection Refused)
- **증상**: API 서버 포트(3001) 접속 불가.
- **해결**: 백엔드 서버가 실행 중이지 않음을 확인하고 재시작 가이드 제공. Frontend에서는 연결 안정성을 위해 절대 경로 URL 사용을 강화.
